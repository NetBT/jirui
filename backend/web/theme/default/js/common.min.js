$.extend({initTable:function(a,b){var c=$.extend({serverSide:true,processing:true,retrieve:true,ajax:{url:"",type:"POST",data:""},bJQueryUI:true,sPaginationType:"full_numbers",columns:[],pageLength:50,sDom:'<"toolbar"rtlip<"clear">>',oLanguage:{sLengthMenu:"显示 _MENU_ 记录",sZeroRecords:"对不起，查询不到任何相关数据",sEmptyTable:"未有相关数据",sLoadingRecords:"正在加载数据-请等待...",sProcessing:"<span>正在加载数据-请等待...</span>",sInfo:"当前显示 _START_ 到 _END_ 条，共 _TOTAL_ 条记录。",sInfoEmpty:"当前显示0到0条，共0条记录",sInfoFiltered:"（数据库中共为 _MAX_ 条记录）",sSearch:"模糊查询：",sUrl:"",oPaginate:{sFirst:"首页",sPrevious:" 上一页 ",sNext:" 下一页 ",sLast:" 尾页 "}},initComplete:"",drawCallback:"",scrollX:false,sScrollX:"100%",sScrollXInner:"100%",scrollY:false},b);$(a).dataTable(c)}});var DataTable={sDom:'<"toolbar"rtlip<"clear">>',scrollY:false,columns:[],id:"",ajax:{url:"",type:"POST",data:""},drawCallback:"",employeeList:{columns:[{data:"id",sTitle:"ID",orderable:false},{data:"alliance_business_id",sTitle:"加盟商ID",orderable:false},{data:"post_id",sTitle:"职位",orderable:false},{data:"employee_name",sTitle:"姓名",orderable:false},{data:"employee_tel",sTitle:"电话",orderable:false},{data:"create_time",sTitle:"创建时间",orderable:false},{data:"employee_sex",sTitle:"性别",orderable:false},{data:"employee_age",sTitle:"年龄",orderable:false},{sTitle:"操作",mDataProp:"id",sClass:"td-manage",orderable:false,fnCreatedCell:function(b,a,e,d,c){$(b).addClass("center").html('<a style="text-decoration:none" class="status" onClick="adminList.adminStopOrStart(this,'+e.id+')" href="javascript:;" title="'+e.status+'"><i class="Hui-iconfont"></i>&emsp;<a style="text-decoration:none" onClick="adminList.adminUpdatePsdModal('+e.id+')" href="javascript:;" title="修改密码"><i class="Hui-iconfont">&#xe63f;</i>&emsp;<a style="text-decoration:none" onClick="adminList.adminEditRole('+e.id+')" href="javascript:;" title="管理角色"><i class="Hui-iconfont">&#xe62b;</i>&nbsp;&nbsp;')}}]},adminList:{columns:[{data:"id",sTitle:'<input type="checkbox" value="0" name="checkbox_wrapper">',sClass:"td-checkbox",orderable:false,render:function(a,b,d,c){return'<input type="checkbox" value="'+a+'" name="">'}},{data:"id",sTitle:"ID",orderable:false},{data:"login_name",sTitle:"用户名",orderable:false},{data:"role_name",sTitle:"角色",orderable:false},{data:"login_ip",sTitle:"最后登录IP",orderable:false},{data:"pre_login_time",sTitle:"最后登录时间",orderable:false},{data:"create_time",sTitle:"创建时间",orderable:false},{data:"status",sTitle:"状态",sClass:"td-status",orderable:false,render:function(a,b,d,c){return'<span class="label radius">'+a+"</span>"}},{sTitle:"操作",mDataProp:"id",sClass:"td-manage",orderable:false,fnCreatedCell:function(b,a,e,d,c){$(b).addClass("center").html('<a style="text-decoration:none" class="status" onClick="adminList.adminStopOrStart(this,'+e.id+')" href="javascript:;" title="'+e.status+'"><i class="Hui-iconfont"></i>&emsp;<a style="text-decoration:none" onClick="adminList.adminUpdatePsdModal('+e.id+')" href="javascript:;" title="修改密码"><i class="Hui-iconfont">&#xe63f;</i>&emsp;<a style="text-decoration:none" onClick="adminList.adminEditRole('+e.id+')" href="javascript:;" title="管理角色"><i class="Hui-iconfont">&#xe62b;</i>&nbsp;&nbsp;')}}]},adminLoginLogList:{columns:[{data:"id",sTitle:'<input type="checkbox" value="0" name="checkbox_wrapper">',sClass:"td-checkbox",orderable:false,width:"1%",render:function(a,b,d,c){return'<input type="checkbox" value="'+a+'" name="">'}},{data:"login_name",sTitle:"账号",orderable:false},{data:"login_position",sTitle:"登陆地点",orderable:false},{data:"login_ip",sTitle:"登录IP",orderable:false},{data:"login_time",sTitle:"登录时间",orderable:false}]},ABList:{columns:[{data:"ab_id",sTitle:"序号",orderable:false},{data:"contract_number",sTitle:"合同编号",orderable:false},{data:"ab_name",sTitle:"店铺名称",orderable:false},{data:"principal_name",sTitle:"负责人",orderable:false},{data:"link_tel",sTitle:"联系电话",orderable:false},{data:"link_address",sTitle:"联系地址",orderable:false},{data:"alliance_fee",sTitle:"加盟费",orderable:false},{data:"balance",sTitle:"余额",orderable:false},{data:"end_time",sTitle:"到期时间",orderable:false},{data:"operate_name",sTitle:"操作人",orderable:false},{data:"start_time",sTitle:"开通时间",orderable:false},{sTitle:"操作",mDataProp:"id",sClass:"td-manage",orderable:false,fnCreatedCell:function(b,a,e,d,c){$(b).addClass("center").html()}}]},initTable:function(){$.initTable(this.id,{columns:this.columns,ajax:this.ajax,drawCallback:this.drawCallback,sDom:this.sDom,scrollY:this.scrollY})},init:function(initTableName,sId,sUrl,oParams){var str="this."+initTableName+"('"+sUrl+"')";this.id=sId;this.ajax.url=sUrl;this.ajax.data=function(d){d.extra_search=oParams};eval(str);this.initTable()},reloadTable:function(a){$(this.id).DataTable().destroy();this.ajax.data=function(b){b.extra_search=a};this.initTable()},drawTable:function(){$(this.id).DataTable().draw(false)},initEmployeeList:function(){this.columns=this.employeeList.columns;this.drawCallback=function(b,a){$("thead").find("th").removeClass("sorting sorting_asc sorting_desc")}},initAdminList:function(){this.columns=this.adminList.columns;this.drawCallback=function(b,a){$("a.status","tbody").each(function(){var c=$(this).attr("title");switch(c){case"启用":$(this).attr("title","禁用");$(this).children().removeClass("Hui-iconfont-gouxuan").addClass("Hui-iconfont-shenhe-tingyong");$(this).parents("tr").find("span",".td-status").addClass("label-success");break;case"禁用":$(this).attr("title","启用");$(this).children().removeClass("Hui-iconfont-shenhe-tingyong").addClass("Hui-iconfont-gouxuan");$(this).parents("tr").find("span",".td-status").addClass("label-defaunt");break}})}},initAdminLoginLogList:function(){this.columns=this.adminLoginLogList.columns;this.drawCallback=function(b,a){$("tr").addClass("text-c").find("td").css({border:"none","border-top":"1px dashed #00CCFF"});$("th").removeClass("sorting sorting_asc sorting_desc").css({border:"none"})}},initAdminRoleList:function(){this.columns=this.adminRoleList.columns;this.drawCallback=function(b,a){$("thead").find("th").css({"text-align":"center"});$("tbody").find("td").css({"text-align":"center"});$("thead").find("th").addClass("small");$("tbody").find("td").addClass("small");$("thead").find("th").removeClass("sorting sorting_asc sorting_desc")}},initABList:function(){this.columns=this.ABList.columns;this.drawCallback=function(b,a){$("thead").find("th").removeClass("sorting sorting_asc sorting_desc")}}};var Common={tabStatus:function(f,d,c,b,a){var e=$(d);$.ajax({url:c,type:"POST",data:{id:f,status:a},async:false,dataType:"json",success:function(g){if(g.code==1000){e.attr("title",b);e.children().toggleClass("Hui-iconfont-gouxuan");e.children().toggleClass("Hui-iconfont-shenhe-tingyong");e.parents("tr").find("span",".td-status").text(a);e.parents("tr").find("span",".td-status").toggleClass("label-defaunt");e.parents("tr").find("span",".td-status").toggleClass("label-success")}layer.msg(g.message,{icon:6,time:1000})},error:function(){layer.msg("网络错误!",{icon:5,time:1000})}})},isInt:function(c){var b=/^\+?[1-9][0-9]*$/;var a=b.test(c);return a},isTime:function(a){},doReload:function(){$("#editAlert").modal("hide");window.location.reload()},doReloadTable:function(){TableType.drawTable();$("#doReload").attr("onclick","")},getDate:function(){var b=new Date();var c="-";var e=b.getMonth()+1;var d=b.getDate();if(e>=1&&e<=9){e="0"+e}if(d>=0&&d<=9){d="0"+d}var a=b.getFullYear()+c+e+c+d;return a}};var DataTime={format:"yyyy-mm-dd hh:ii:ss",minView:"hour",startTime:"",endTime:"",init:function(){var a=this;$(".form_start_datetime").datetimepicker("remove");$(".form_end_datetime").datetimepicker("remove");$(".form_start_datetime").datetimepicker({minView:a.minView,language:"zh-CN",autoclose:true,format:a.format,todayHighlight:true}).on("click",function(){$(this).datetimepicker("setEndDate",$(this).next(".form_end_datetime").val());if(a.startTime!=""){$(this).datetimepicker("setStartDate",a.startTime)}});$(".form_end_datetime").datetimepicker({minView:a.minView,language:"zh-CN",autoclose:true,format:a.format,todayHighlight:true}).on("click",function(){$(this).datetimepicker("setStartDate",$(this).prev(".form_start_datetime").val());$(this).datetimepicker("setEndDate",new Date)})},setFormat:function(b,a){this.format=b;this.minView=a},setStartTime:function(a){this.startTime=a}};function reloadDataTable(){$("#doReload").attr("onclick","Common.doReloadTable()")}var Modal={modalWarningUrl:"/index.php?r=common/modal-warning",modalNotifyUrl:"/index.php?r=common/modal-warning",modalWarning:function(a){var b=this;$.ajax({url:b.modalWarningUrl+"message="+a,type:"get",async:false,dataType:"html",success:function(c){$("#warningAlert").modal("hide").remove();$("body").append(c);$("#warningAlert").modal("show")}})},modalNotify:function(a){var b=this;$.ajax({url:b.modalNotifyUrl+"message="+a,type:"get",async:false,dataType:"html",success:function(c){$("#notifyAlert").modal("hide").remove();$("body").append(c);$("#notifyAlert").modal("show")}})},loadModal:function(b,c,a){$.ajax({url:b,type:"post",async:false,data:c,dataType:"html",success:function(d){$(a).modal("hide").remove();$("body").append(d);$(a).modal("show")}})}};